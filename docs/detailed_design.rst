詳細設計書
==========

モジュール構成
--------------

``houseprices.src.main``
~~~~~~~~~~~~~~~~~~~~~~~~

アプリケーションのメインロジックを含む唯一のモジュールです。

定数定義
^^^^^^^^
*   ``CACHE_FILE``: データのキャッシュファイル名 (``house_prices.csv``)。
*   ``COLUMN_TRANSLATIONS``: データセットのカラム名（英語）を日本語に変換するための辞書。
*   ``VALUE_TRANSLATIONS``: カテゴリデータの値（英語）を日本語に変換するための辞書。

関数仕様
^^^^^^^^

``main(page: ft.Page)``
'''''''''''''''''''''''

Fletアプリケーションのエントリーポイント。

*   **引数**:
    *   ``page`` (ft.Page): アプリケーションのルートページオブジェクト。
*   **処理内容**:
    1.  **初期設定**: ページタイトルの設定。
    2.  **データテーブル作成**:

        *   ``COLUMN_TRANSLATIONS`` を使用してヘッダーを作成。
        *   ``df_house.head(50)`` のデータをループ処理し、``VALUE_TRANSLATIONS`` で値を変換しながら行を作成。

    3.  **相関分析**:

        *   ``df_house.corr()`` で相関係数を計算。
        *   ``SalePrice`` と相関が高い上位10項目を抽出。
        *   ``ft.BarChart`` を用いてグラフ化。

    4.  **予測モデル構築**:

        *   特徴量 (``GrLivArea``, ``YearBuilt``, ``OverallQual``, ``GarageCars``, ``TotalBsmtSF``) を選択。
        *   ``RandomForestRegressor`` を初期化し、全データで学習 (``fit``)。
    5.  **予測UI作成**:
        *   入力フィールド (``TextField``, ``Slider``) を配置。
        *   予測ボタン (``ElevatedButton``) のイベントハンドラ ``on_predict_click`` を定義。
        *   イベントハンドラ内でモデルの推論 (``predict``) とFeature Importanceの可視化を実行。
    6.  **欠損値分析**:
        *   ``isnull().sum()`` で欠損値を集計。
        *   欠損数が多い順にソートし、グラフとリストを作成。
    7.  **レイアウト**:
        *   ``ft.Tabs`` を使用して4つの画面を統合し、ページに追加。

UIコンポーネント詳細
^^^^^^^^^^^^^^^^^^^^

*   **チャート**: ``ft.BarChart`` を使用。ツールチップを設定し、マウスオーバーで詳細値を表示可能にする。
*   **スライダー**: ``ft.Slider`` を使用し、品質や台数などの数値入力を直感的にする。
*   **レスポンシブ対応**: ``expand=True`` を多用し、画面サイズに合わせてコンテンツが伸縮するように配置する。
